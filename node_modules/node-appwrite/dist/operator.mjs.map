{"version":3,"sources":["../src/operator.ts"],"names":["Condition"],"mappings":"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","sourcesContent":["type OperatorValuesSingle = string | number | boolean;\nexport type OperatorValuesList = string[] | number[] | boolean[] | any[];\nexport type OperatorValues = OperatorValuesSingle | OperatorValuesList;\n\nexport enum Condition {\n  Equal = \"equal\",\n  NotEqual = \"notEqual\",\n  GreaterThan = \"greaterThan\",\n  GreaterThanEqual = \"greaterThanEqual\",\n  LessThan = \"lessThan\",\n  LessThanEqual = \"lessThanEqual\",\n  Contains = \"contains\",\n  IsNull = \"isNull\",\n  IsNotNull = \"isNotNull\",\n}\n\n/**\n * Helper class to generate operator strings for atomic operations.\n */\nexport class Operator {\n  method: string;\n  values: OperatorValuesList | undefined;\n\n  /**\n   * Constructor for Operator class.\n   *\n   * @param {string} method\n   * @param {OperatorValues} values\n   */\n  constructor(\n    method: string,\n    values?: OperatorValues\n  ) {\n    this.method = method;\n\n    if (values !== undefined) {\n      if (Array.isArray(values)) {\n        this.values = values;\n      } else {\n        this.values = [values] as OperatorValuesList;\n      }\n    }\n  }\n\n  /**\n   * Convert the operator object to a JSON string.\n   *\n   * @returns {string}\n   */\n  toString(): string {\n    return JSON.stringify({\n      method: this.method,\n      values: this.values,\n    });\n  }\n\n  /**\n   * Increment a numeric attribute by a specified value.\n   *\n   * @param {number} value\n   * @param {number} max\n   * @returns {string}\n   */\n  static increment = (value: number = 1, max?: number): string => {\n    if (isNaN(value) || !isFinite(value)) {\n      throw new Error(\"Value cannot be NaN or Infinity\");\n    }\n    if (max !== undefined && (isNaN(max) || !isFinite(max))) {\n      throw new Error(\"Max cannot be NaN or Infinity\");\n    }\n    const values: any[] = [value];\n    if (max !== undefined) {\n      values.push(max);\n    }\n    return new Operator(\"increment\", values).toString();\n  };\n\n  /**\n   * Decrement a numeric attribute by a specified value.\n   *\n   * @param {number} value\n   * @param {number} min\n   * @returns {string}\n   */\n  static decrement = (value: number = 1, min?: number): string => {\n    if (isNaN(value) || !isFinite(value)) {\n      throw new Error(\"Value cannot be NaN or Infinity\");\n    }\n    if (min !== undefined && (isNaN(min) || !isFinite(min))) {\n      throw new Error(\"Min cannot be NaN or Infinity\");\n    }\n    const values: any[] = [value];\n    if (min !== undefined) {\n      values.push(min);\n    }\n    return new Operator(\"decrement\", values).toString();\n  };\n\n  /**\n   * Multiply a numeric attribute by a specified factor.\n   *\n   * @param {number} factor\n   * @param {number} max\n   * @returns {string}\n   */\n  static multiply = (factor: number, max?: number): string => {\n    if (isNaN(factor) || !isFinite(factor)) {\n      throw new Error(\"Factor cannot be NaN or Infinity\");\n    }\n    if (max !== undefined && (isNaN(max) || !isFinite(max))) {\n      throw new Error(\"Max cannot be NaN or Infinity\");\n    }\n    const values: any[] = [factor];\n    if (max !== undefined) {\n      values.push(max);\n    }\n    return new Operator(\"multiply\", values).toString();\n  };\n\n  /**\n   * Divide a numeric attribute by a specified divisor.\n   *\n   * @param {number} divisor\n   * @param {number} min\n   * @returns {string}\n   */\n  static divide = (divisor: number, min?: number): string => {\n    if (isNaN(divisor) || !isFinite(divisor)) {\n      throw new Error(\"Divisor cannot be NaN or Infinity\");\n    }\n    if (min !== undefined && (isNaN(min) || !isFinite(min))) {\n      throw new Error(\"Min cannot be NaN or Infinity\");\n    }\n    if (divisor === 0) {\n      throw new Error(\"Divisor cannot be zero\");\n    }\n    const values: any[] = [divisor];\n    if (min !== undefined) {\n      values.push(min);\n    }\n    return new Operator(\"divide\", values).toString();\n  };\n\n  /**\n   * Apply modulo operation on a numeric attribute.\n   *\n   * @param {number} divisor\n   * @returns {string}\n   */\n  static modulo = (divisor: number): string => {\n    if (isNaN(divisor) || !isFinite(divisor)) {\n      throw new Error(\"Divisor cannot be NaN or Infinity\");\n    }\n    if (divisor === 0) {\n      throw new Error(\"Divisor cannot be zero\");\n    }\n    return new Operator(\"modulo\", [divisor]).toString();\n  };\n\n  /**\n   * Raise a numeric attribute to a specified power.\n   *\n   * @param {number} exponent\n   * @param {number} max\n   * @returns {string}\n   */\n  static power = (exponent: number, max?: number): string => {\n    if (isNaN(exponent) || !isFinite(exponent)) {\n      throw new Error(\"Exponent cannot be NaN or Infinity\");\n    }\n    if (max !== undefined && (isNaN(max) || !isFinite(max))) {\n      throw new Error(\"Max cannot be NaN or Infinity\");\n    }\n    const values: any[] = [exponent];\n    if (max !== undefined) {\n      values.push(max);\n    }\n    return new Operator(\"power\", values).toString();\n  };\n\n  /**\n   * Append values to an array attribute.\n   *\n   * @param {any[]} values\n   * @returns {string}\n   */\n  static arrayAppend = (values: any[]): string =>\n    new Operator(\"arrayAppend\", values).toString();\n\n  /**\n   * Prepend values to an array attribute.\n   *\n   * @param {any[]} values\n   * @returns {string}\n   */\n  static arrayPrepend = (values: any[]): string =>\n    new Operator(\"arrayPrepend\", values).toString();\n\n  /**\n   * Insert a value at a specific index in an array attribute.\n   *\n   * @param {number} index\n   * @param {any} value\n   * @returns {string}\n   */\n  static arrayInsert = (index: number, value: any): string =>\n    new Operator(\"arrayInsert\", [index, value]).toString();\n\n  /**\n   * Remove a value from an array attribute.\n   *\n   * @param {any} value\n   * @returns {string}\n   */\n  static arrayRemove = (value: any): string =>\n    new Operator(\"arrayRemove\", [value]).toString();\n\n  /**\n   * Remove duplicate values from an array attribute.\n   *\n   * @returns {string}\n   */\n  static arrayUnique = (): string =>\n    new Operator(\"arrayUnique\", []).toString();\n\n  /**\n   * Keep only values that exist in both the current array and the provided array.\n   *\n   * @param {any[]} values\n   * @returns {string}\n   */\n  static arrayIntersect = (values: any[]): string =>\n    new Operator(\"arrayIntersect\", values).toString();\n\n  /**\n   * Remove values from the array that exist in the provided array.\n   *\n   * @param {any[]} values\n   * @returns {string}\n   */\n  static arrayDiff = (values: any[]): string =>\n    new Operator(\"arrayDiff\", values).toString();\n\n  /**\n   * Filter array values based on a condition.\n   *\n   * @param {Condition} condition\n   * @param {any} value\n   * @returns {string}\n   */\n  static arrayFilter = (condition: Condition, value?: any): string => {\n    const values: any[] = [condition as string, value === undefined ? null : value];\n    return new Operator(\"arrayFilter\", values).toString();\n  };\n\n  /**\n   * Concatenate a value to a string or array attribute.\n   *\n   * @param {any} value\n   * @returns {string}\n   */\n  static stringConcat = (value: any): string =>\n    new Operator(\"stringConcat\", [value]).toString();\n\n  /**\n   * Replace occurrences of a search string with a replacement string.\n   *\n   * @param {string} search\n   * @param {string} replace\n   * @returns {string}\n   */\n  static stringReplace = (search: string, replace: string): string =>\n    new Operator(\"stringReplace\", [search, replace]).toString();\n\n  /**\n   * Toggle a boolean attribute.\n   *\n   * @returns {string}\n   */\n  static toggle = (): string =>\n    new Operator(\"toggle\", []).toString();\n\n  /**\n   * Add days to a date attribute.\n   *\n   * @param {number} days\n   * @returns {string}\n   */\n  static dateAddDays = (days: number): string =>\n    new Operator(\"dateAddDays\", [days]).toString();\n\n  /**\n   * Subtract days from a date attribute.\n   *\n   * @param {number} days\n   * @returns {string}\n   */\n  static dateSubDays = (days: number): string =>\n    new Operator(\"dateSubDays\", [days]).toString();\n\n  /**\n   * Set a date attribute to the current date and time.\n   *\n   * @returns {string}\n   */\n  static dateSetNow = (): string =>\n    new Operator(\"dateSetNow\", []).toString();\n}\n"]}